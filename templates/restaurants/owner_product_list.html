{% extends 'base.html' %}

{% block title %}Manage Products{% endblock %}

{% block content %}
<div class="container">
  <h1 class="mb-3">Products for {{ restaurant.name }}</h1>
  <div class="mb-3 text-end">
    <a href="{% url 'restaurants:product_create' restaurant.pk %}" class="btn btn-primary">Add Product</a>
    <a href="{% url 'restaurants:owner_restaurants' %}" class="btn btn-secondary ms-2">Back to Restaurants</a>
  </div>
  <table class="table table-striped table-bordered">
    <thead class="table-light">
      <tr>
        <th>Name</th>
        <th>Category</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Available</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
        <tr>
          <td>{{ product.name }}</td>
          <td>{{ product.category }}</td>
          <td>${{ product.price }}</td>
          <td>{{ product.quantity }}</td>
          <td>{% if product.is_available %}Yes{% else %}No{% endif %}</td>
          <td>
            <a href="{% url 'restaurants:product_edit' product.pk %}" class="btn btn-sm btn-outline-secondary">Edit</a>
            <form action="{% url 'restaurants:product_delete' product.pk %}" method="post" class="d-inline">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this product?');">Delete</button>
            </form>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="6">No products found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}